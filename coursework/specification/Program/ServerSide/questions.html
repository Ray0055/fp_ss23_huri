<!DOCTYPE html>
<html>
<head>
    <title>Questions</title>
    <style>
        .pagination {
            display: inline-block;
        }

        .pagination a {
            margin: 4px;
            padding: 8px 16px;
            text-decoration: none;
            border: 1px solid #ddd;
        }

        .pagination a.active {
            background-color: #4CAF50;
            color: white;
            border: 1px solid #4CAF50;
        }

        .pagination a:hover:not(.active) {
            background-color: #ddd;
        }
    </style>
</head>
<body>

<h1>Questions</h1>

<table border="1">
    <tr>
        <th>ID</th>
        <th>Question</th>
        <th>Options</th>
        <th>CorrectIndex</th>
        <th>CreatedTime</th>
        <th>ModifiedTime</th>
        <th>Completed</th>
        
    </tr>
    {{range .}}
    <tr>
        <td>{{.ID}}</td>
        <td>{{.Question}}</td>
        <td>{{.Options}}</td>
        <td>{{.CorrectIndex}}</td>
        <td>{{.CreatedTime}}</td>
        <td>{{.ModifiedTime}}</td>
        <th>{{.Completed}}</th>
        <td><button data-id="{{.ID}}" onclick="editQuestion(this)">Edit</button></td>
        <td><button data-id="{{.ID}}" onclick="deleteQuestion(this)">Delete</button></td>
    </tr>
    {{end}}

    <form id="addQuestionForm">
        <input type="text" id="newQuestion" placeholder="New Question" />
        <input type="text" id="newOptions" placeholder="New Options" />
        <input type="number" id="newCorrectIndex" placeholder="New Correct Index" />
        <button type="submit">Add Question</button>
    </form>
</table>

<div class="pagination">
    <a href="/api/questions?page=1">First</a>
    <a href="#" id="prev">Previous</a>
    <a href="#" id="next">Next</a>
    <a href="/api/questions?page=last" id="last">Last</a> <!-- 此处假设'last'为最后一页的页码，应由后端提供 -->
</div>

<script>
    // 这里是简单的JavaScript代码，用于更新“Previous”和“Next”的链接。
    // 在一个完整的应用中，你可能会使用更复杂的前端代码来处理这些逻辑。
    var urlParams = new URLSearchParams(window.location.search);
    var page = urlParams.get('page');
    if (page) {
        var prevPage = parseInt(page) - 1;
        var nextPage = parseInt(page) + 1;
        document.getElementById('prev').setAttribute('href', '/api/questions?page=' + prevPage);
        document.getElementById('next').setAttribute('href', '/api/questions?page=' + nextPage);
    }
</script>
<script>
    function deleteQuestion(id) {
        var id = element.getAttribute('data-id');

    fetch(`/api/questions/${id}`, {
        method: 'DELETE'
    }).then(response => response.json())
    .then(data => {
        // 刷新页面或者其他操作
    });
}

// 编辑问题
function editQuestion(id) {
    var id = element.getAttribute('data-id');
    const newQuestion = prompt('Enter new question text:');
    const newOptions = prompt('Enter new options:');
    const newCorrectIndex = prompt('Enter new correct index:');
    fetch(`/api/questions/${id}`, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            question: newQuestion,
            options: newOptions,
            correctIndex: newCorrectIndex
        })
    }).then(response => response.json())
    .then(data => {
        // 刷新页面或者其他操作
    });
}

// 添加问题
document.getElementById('addQuestionForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const newQuestion = document.getElementById('newQuestion').value;
    const newOptions = document.getElementById('newOptions').value;
    const newCorrectIndex = document.getElementById('newCorrectIndex').value;
    fetch(`/api/questions`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            question: newQuestion,
            options: newOptions,
            correctIndex: newCorrectIndex
        })
    }).then(response => response.json())
    .then(data => {
        // 刷新页面或者其他操作
    });
});
</script>

</body>
</html>
